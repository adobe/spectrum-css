{
    "name": "storybook",
    "tags": ["tooling"],
    "implicitDependencies": ["tag:component"],
    "namedInputs": {
        "core": [
            "{workspaceRoot}/assets",
            "{projectRoot}/*.js",
            "{projectRoot}/*.html",
            "{workspaceRoot}/components/*/stories",
            "{workspaceRoot}/components/*/dist"
        ],
        "tools": []
    },
    "targets": {
        "clean": {
            "inputs": ["{projectRoot}/storybook-static"]
        },
        "build": {
            "dependsOn": ["^build"],
            "inputs": ["core", { "externalDependencies": ["storybook"] }],
            "outputs": ["{projectRoot}/storybook-static"],
            "executor": "nx:run-commands",
            "options": {
                "commands": ["storybook build --config-dir {projectRoot} --output-dir {projectRoot}/storybook-static"],
                "envFile": ".env.prod"
            }
        },
        "dev": {
            "dependsOn": ["^build"],
            "inputs": ["core", { "externalDependencies": ["storybook"] }],
            "outputs": [],
            "executor": "nx:run-commands",
            "options": {
                "commands": [
                    "nx watch --projects tag:component -- nx run \\$NX_PROJECT_NAME:build",
                    "storybook dev --config-dir {projectRoot} --port 3000"
                ]
            }
        },
        "lint": {
            "inputs": ["core", { "externalDependencies": ["stylelint", "eslint"] }],
            "options": {
                "commands": [
                    "stylelint {projectRoot}/assets/*.css",
                    "eslint --no-error-on-unmatched-pattern {projectRoot}/*.js {projectRoot}/{package,project}.json ./components/*/stories/*.js"
                ]
            }
        },
        "format": {
            "inputs": ["core", { "externalDependencies": ["stylelint", "eslint", "prettier"] }],
            "options": {
                "commands": [
                    "stylelint {projectRoot}/assets/*.css --fix",
                    "eslint --no-error-on-unmatched-pattern {projectRoot}/*.js {projectRoot}/{package,project}.json ./components/*/stories/*.js --fix",
                    "prettier --no-error-on-unmatched-pattern --write {projectRoot}/**/*.{js,json,yml,md} {projectRoot}/*.{js,json,yml,md}"
                ]
            }
        },
        "test": {
            "executor": "nx:run-commands",
            "options": {
                "command": "chromatic --build-script-name build --junit-report"
            }
        }
    }
}
