# Converting CSS custom properties to Spectrum tokens

This document explains how to convert CSS custom properties (CSS variables) that start with `--spectrum-` into entries in the `tokens.json` file for Spectrum CSS components.

## Overview

Spectrum CSS components use custom properties for theming and styling. These properties are defined in the component's CSS file and should be converted to structured tokens in the `tokens.json` file for better maintainability and consistency.

## Process

### Identify custom properties

Look for all custom properties in the component's CSS file that start with `--spectrum-{component-name}-`. For example, in `components/alertdialog/index.css`:

```css
.spectrum-AlertDialog {
	--spectrum-alert-dialog-min-width: var(--spectrum-alert-dialog-minimum-width);
	--spectrum-alert-dialog-max-width: var(--spectrum-alert-dialog-maximum-width);
	--spectrum-alert-dialog-icon-size: var(--spectrum-workflow-icon-size-100);
	/* ... more properties */
}
```

### Convert property names

Remove the `--spectrum-` prefix and convert the property name to kebab-case:

| CSS Property                        | Token Key                |
| ----------------------------------- | ------------------------ |
| `--spectrum-alert-dialog-min-width` | `alert-dialog-min-width` |
| `--spectrum-alert-dialog-max-width` | `alert-dialog-max-width` |
| `--spectrum-alert-dialog-icon-size` | `alert-dialog-icon-size` |

### Determine token schema

Choose the appropriate schema based on the token type:

- **alias.json**: For simple value references to another token.
  ```json
  {
  	"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/alias.json",
  	"value": "{spacing-300}"
  }
  ```
- **scale-set.json**: For responsive values (e.g., desktop/mobile variants).
  ```json
  {
  	"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/scale-set.json",
  	"sets": {
  		"desktop": {
  			"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/alias.json",
  			"value": "{spacing-700}"
  		},
  		"mobile": {
  			"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/alias.json",
  			"value": "{spacing-600}"
  		}
  	}
  }
  ```
- **color-set.json**: For color sets, often used for theming or stateful colors.
  ```json
  {
  	"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/color-set.json",
  	"value": {
  		"light": "#FFFFFF",
  		"dark": "#000000"
  	}
  }
  ```
- **color.json**: For direct color values (RGB/RGBA format).
  ```json
  {
  	"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/color.json",
  	"value": "rgb(255, 255, 255)"
  }
  ```
- **dimension.json**: For explicit dimension values (e.g., px, em, rem) that are not references to other tokens.
  ```json
  {
  	"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/dimension.json",
  	"value": "16px"
  }
  ```

### Map values

Convert CSS custom property values to token references:

| CSS value                                  | Token value                  |
| ------------------------------------------ | ---------------------------- |
| `var(--spectrum-spacing-300)`              | `{spacing-300}`              |
| `var(--spectrum-heading-color)`            | `{heading-color}`            |
| `var(--spectrum-background-layer-2-color)` | `{background-layer-2-color}` |

## Token structure

### Basic alias token

```json
{
	"alert-dialog-min-width": {
		"component": "alert-dialog",
		"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/alias.json",
		"value": "{alert-dialog-minimum-width}"
	}
}
```

### Scale set token (responsive)

```json
{
	"alert-dialog-description-to-buttons": {
		"component": "alert-dialog",
		"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/scale-set.json",
		"sets": {
			"desktop": {
				"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/alias.json",
				"value": "{spacing-700}"
			},
			"mobile": {
				"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/alias.json",
				"value": "{spacing-600}"
			}
		}
	}
}
```

## Example: Alert Dialog

### Token data

```json
{
	"alert-dialog-min-width": {
		"component": "alert-dialog",
		"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/alias.json",
		"value": "{alert-dialog-minimum-width}"
	},
	"alert-dialog-max-width": {
		"component": "alert-dialog",
		"$schema": "https://opensource.adobe.com/spectrum-tokens/schemas/token-types/alias.json",
		"value": "{alert-dialog-maximum-width}"
	}
}
```

### Converted to custom properties

```css
.spectrum-AlertDialog {
	--spectrum-alert-dialog-min-width: var(--spectrum-alert-dialog-minimum-width);
	--spectrum-alert-dialog-max-width: var(--spectrum-alert-dialog-maximum-width);
	/* ... more properties */
}
```

## Best practices

1. **Consistent naming**: Always use kebab-case for token keys
2. **Component assignment**: Assign all tokens to the appropriate component
3. **Schema selection**: Use `alias.json` for simple references, `scale-set.json` for responsive values
4. **Value mapping**: Convert CSS custom property references to token references
5. **Preserve existing tokens**: Don't overwrite existing tokens that already have the correct structure
6. **Documentation**: Update component documentation to reflect the new token structure

## Common value mappings

| CSS reference                       | Token reference            |
| ----------------------------------- | -------------------------- |
| `--spectrum-spacing-{n}`            | `{spacing-{n}}`            |
| `--spectrum-color-{name}`           | `{color-{name}}`           |
| `--spectrum-font-{property}`        | `{font-{property}}`        |
| `--spectrum-corner-radius-{size}`   | `{corner-radius-{size}}`   |
| `--spectrum-{component}-{property}` | `{{component}-{property}}` |

## Validation

After converting, ensure:

1. All custom properties from the CSS file are represented in the tokens.json
2. Token keys follow the naming convention
3. Schema references are correct
4. Component assignments are accurate
5. Value references point to valid tokens

This conversion process ensures better maintainability, consistency, and enables the Spectrum design system to properly manage component theming and styling.
