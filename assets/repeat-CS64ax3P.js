import{R as A}from"./lit-element-C96egxJg.js";import{e as Q,i as b,t as C}from"./decorator-BliclrE4.js";import{u as D,c as h,a as v,p as x,d as E}from"./directive-helpers-Vx9dmk2R.js";/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const w=(r,f,c)=>{const p=new Map;for(let t=f;t<=c;t++)p.set(r[t],t);return p},L=Q(class extends b{constructor(r){if(super(r),r.type!==C.CHILD)throw Error("repeat() can only be used in text expressions")}dt(r,f,c){let p;c===void 0?c=f:f!==void 0&&(p=f);const t=[],i=[];let l=0;for(const u of r)t[l]=p?p(u,l):l,i[l]=c(u,l),l++;return{values:i,keys:t}}render(r,f,c){return this.dt(r,f,c).values}update(r,[f,c,p]){const t=D(r),{values:i,keys:l}=this.dt(f,c,p);if(!Array.isArray(t))return this.ut=l,i;const u=this.ut??(this.ut=[]),a=[];let m,g,s=0,o=t.length-1,e=0,n=i.length-1;for(;s<=o&&e<=n;)if(t[s]===null)s++;else if(t[o]===null)o--;else if(u[s]===l[e])a[e]=h(t[s],i[e]),s++,e++;else if(u[o]===l[n])a[n]=h(t[o],i[n]),o--,n--;else if(u[s]===l[n])a[n]=h(t[s],i[n]),v(r,a[n+1],t[s]),s++,n--;else if(u[o]===l[e])a[e]=h(t[o],i[e]),v(r,t[s],t[o]),o--,e++;else if(m===void 0&&(m=w(l,e,n),g=w(u,s,o)),m.has(u[s]))if(m.has(u[o])){const d=g.get(l[e]),y=d!==void 0?t[d]:null;if(y===null){const k=v(r,t[s]);h(k,i[e]),a[e]=k}else a[e]=h(y,i[e]),v(r,t[s],y),t[d]=null;e++}else x(t[o]),o--;else x(t[s]),s++;for(;e<=n;){const d=v(r,a[n+1]);h(d,i[e]),a[e++]=d}for(;s<=o;){const d=t[s++];d!==null&&x(d)}return this.ut=l,E(r,a),A}});export{L as Q};
