/*
Copyright 2023 Adobe. All rights reserved.
This file is licensed to you under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License. You may obtain a copy
of the License at http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed under
the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
OF ANY KIND, either express or implied. See the License for the specific language
governing permissions and limitations under the License.
*/

.spectrum-Textfield {
  --spectrum-textfield-min-width: var(--spectrum-text-field-minimum-width-multiplier);
  --spectrum-textfield-corner-radius: var(--spectrum-corner-radius-100);

  /* default height */
  --spectrum-textfield-height: var(--spectrum-component-height-100);

  /* default spacing */
  --spectrum-textfield-spacing-inline: var(--spectrum-component-edge-to-text-100);
  --spectrum-textfield-spacing-inline-quiet: var(--spectrum-field-edge-to-text-quiet);
  --spectrum-textfield-spacing-block-start: var(--spectrum-component-top-to-text-100);
  --spectrum-textfield-spacing-block-end: var(--spectrum-component-bottom-to-text-100);
  --spectrum-textfield-spacing-block-quiet: var(--spectrum-field-edge-to-border-quiet);

  /* default label spacing */
  --spectrum-textfield-label-spacing-block: var(--spectrum-field-label-to-component);
  --spectrum-textfield-label-spacing-block-quiet: var(--spectrum-field-label-to-component-quiet-medium);
  --spectrum-textfield-label-spacing-inline-side-label: var(--spectrum-spacing-100);

  /* default help text spacing */
  --spectrum-textfield-helptext-spacing-block: var(--spectrum-help-text-to-component);

  /* default icon size */
  --spectrum-textfield-icon-size-invalid: var(--spectrum-workflow-icon-size-100);

  /* default icon spacing */
  --spectrum-textfield-icon-spacing-inline-start-invalid: var(--spectrum-field-text-to-alert-icon-medium);
  --spectrum-textfield-icon-spacing-inline-end-invalid: var(--spectrum-field-edge-to-alert-icon-medium);
  --spectrum-textfield-icon-spacing-inline-end-quiet-invalid: var(--spectrum-field-edge-to-alert-icon-quiet);
  --spectrum-textfield-icon-spacing-block-invalid: var(--spectrum-field-top-to-alert-icon-medium);

  --spectrum-textfield-icon-spacing-inline-start-valid:var(--spectrum-field-text-to-validation-icon-medium);
  --spectrum-textfield-icon-spacing-inline-end-valid: var(--spectrum-field-edge-to-validation-icon-medium);
  --spectrum-textfield-icon-spacing-inline-end-quiet-valid: var(--spectrum-field-edge-to-validation-icon-quiet);
  --spectrum-textfield-icon-spacing-block-valid: var(--spectrum-field-top-to-validation-icon-medium);

  /* correct font token */
  /* --spectrum-textfield-font-family: var(--spectrum-font-family-default); */

  /* placeholder font token */
  --spectrum-textfield-font-family: adobe-clean, 'Source Sans Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Trebuchet MS', 'Lucida Grande', sans-serif;
  --spectrum-textfield-font-weight: var(--spectrum-font-regular-default);

  /* character count text defaults */
  /* character count correct font token */
  /* --spectrum-textfield-character-count-font-family: var(--spectrum-font-family-default); */

  /* character count placeholder font token */
  --spectrum-textfield-character-count-font-family: adobe-clean, 'Source Sans Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Trebuchet MS', 'Lucida Grande', sans-serif;
  --spectrum-textfield-character-count-font-weight: var(--spectrum-font-regular-default);
  --spectrum-textfield-character-count-font-size: var(--spectrum-font-size-75);
  --spectrum-textfield-character-count-spacing-inline: var(--spectrum-spacing-200);
  --spectrum-textfield-character-count-spacing-block: var(--spectrum-component-bottom-to-text-75);
  --spectrum-textfield-character-count-spacing-inline-side: var(--spectrum-side-label-character-count-to-field);
  --spectrum-textfield-character-count-spacing-block-side: var(--spectrum-side-label-character-count-top-margin-medium);

  /* focus indicator */
  --spectrum-textfield-focus-indicator-thickness: var(--spectrum-focus-indicator-thickness);
  --spectrum-textfield-focus-indicator-gap: var(--spectrum-focus-indicator-gap);

  /*** Colors ***/
  --spectrum-textfield-background-color: var(--spectrum-gray-50);
  --spectrum-textfield-background-color-disabled: var(--spectrum-disabled-background-color);

  --spectrum-textfield-border-color-negative-default: var(--spectrum-negative-border-color-default);
  --spectrum-textfield-border-color-negative-hover: var(--spectrum-negative-border-color-hover);
  --spectrum-textfield-border-color-negative-active: var(--spectrum-negative-border-color-down);
  --spectrum-textfield-border-color-negative-focus: var(--spectrum-negative-border-color-key-focus);

  --spectrum-textfield-text-color-default: var(--spectrum-neutral-content-color-default);
  --spectrum-textfield-text-color-hover: var(--spectrum-neutral-content-color-hover);
  --spectrum-textfield-text-color-active: var(--spectrum-neutral-content-color-down);
  --spectrum-textfield-text-color-focus: var(--spectrum-neutral-content-color-key-focus);
  --spectrum-textfield-text-color-disabled: var(--spectrum-disabled-content-color);
  --spectrum-textfield-text-color-readonly: var(--spectrum-neutral-content-color-default);

  --spectrum-textfield-icon-color-invalid: var(--spectrum-negative-visual-color);
  --spectrum-textfield-icon-color-valid: var(--spectrum-positive-visual-color);

  --spectrum-textfield-focus-indicator-color: var(--spectrum-focus-indicator-color);
}


/********* Text field t-shirt sizes *********/
.spectrum-Textfield--sizeS {
  --spectrum-textfield-height: var(--spectrum-component-height-75);
  --spectrum-textfield-label-spacing-block-quiet: var(--spectrum-field-label-to-component-quiet-small);
  --spectrum-textfield-label-spacing-inline-side-label: var(--spectrum-spacing-100);
  --spectrum-textfield-placeholder-font-size: var(--spectrum-font-size-75);
  --spectrum-textfield-spacing-inline: var(--spectrum-component-edge-to-text-75);
  --spectrum-textfield-icon-size-invalid: var(--spectrum-workflow-icon-size-75);
  --spectrum-textfield-icon-spacing-inline-end-invalid: var(--spectrum-field-edge-to-alert-icon-small);
  --spectrum-textfield-icon-spacing-inline-end-valid: var(--spectrum-field-edge-to-validation-icon-small);
  --spectrum-textfield-icon-spacing-block-invalid: var(--spectrum-field-top-to-alert-icon-small);
  --spectrum-textfield-icon-spacing-block-valid: var(--spectrum-field-top-to-validation-icon-small);
  --spectrum-textfield-icon-spacing-inline-start-invalid: var(--spectrum-field-text-to-alert-icon-small);
  --spectrum-textfield-icon-spacing-inline-start-valid: var(--spectrum-field-text-to-validation-icon-small);
  --spectrum-textfield-character-count-font-size: var(--spectrum-font-size-75);
  --spectrum-textfield-character-count-spacing-block: var(--spectrum-component-bottom-to-text-75);
  --spectrum-textfield-character-count-spacing-block-quiet: var(--spectrum-character-count-to-field-quiet-small);
  --spectrum-textfield-character-count-spacing-block-side: var(--spectrum-side-label-character-count-top-margin-small);
}

.spectrum-Textfield--sizeM {
  --spectrum-textfield-height: var(--spectrum-component-height-100);
  --spectrum-textfield-label-spacing-block-quiet: var(--spectrum-field-label-to-component-quiet-medium);
  --spectrum-textfield-label-spacing-inline-side-label: var(--spectrum-spacing-200);
  --spectrum-textfield-placeholder-font-size: var(--spectrum-font-size-100);
  --spectrum-textfield-spacing-inline: var(--spectrum-component-edge-to-text-100);
  --spectrum-textfield-icon-size-invalid: var(--spectrum-workflow-icon-size-100);
  --spectrum-textfield-icon-spacing-inline-end-invalid: var(--spectrum-field-edge-to-alert-icon-medium);
  --spectrum-textfield-icon-spacing-inline-end-valid: var(--spectrum-field-edge-to-validation-icon-medium);
  --spectrum-textfield-icon-spacing-block-invalid: var(--spectrum-field-top-to-alert-icon-medium);
  --spectrum-textfield-icon-spacing-block-valid: var(--spectrum-field-top-to-validation-icon-medium);
  --spectrum-textfield-icon-spacing-inline-start-invalid: var(--spectrum-field-text-to-alert-icon-medium);
  --spectrum-textfield-icon-spacing-inline-start-valid:var(--spectrum-field-text-to-validation-icon-medium);
  --spectrum-textfield-character-count-font-size: var(--spectrum-font-size-75);
  --spectrum-textfield-character-count-spacing-block: var(--spectrum-component-bottom-to-text-75);
  --spectrum-textfield-character-count-spacing-block-quiet: var(--spectrum-character-count-to-field-quiet-medium);
  --spectrum-textfield-character-count-spacing-block-side: var(--spectrum-side-label-character-count-top-margin-medium);
}

.spectrum-Textfield--sizeL {
  --spectrum-textfield-height: var(--spectrum-component-height-200);
  --spectrum-textfield-label-spacing-block-quiet: var(--spectrum-field-label-to-component-quiet-large);
  --spectrum-textfield-label-spacing-inline-side-label: var(--spectrum-spacing-200);
  --spectrum-textfield-placeholder-font-size: var(--spectrum-font-size-200);
  --spectrum-textfield-spacing-inline: var(--spectrum-component-edge-to-text-200);
  --spectrum-textfield-icon-size-invalid: var(--spectrum-workflow-icon-size-200);
  --spectrum-textfield-icon-spacing-inline-end-invalid: var(--spectrum-field-edge-to-alert-icon-large);
  --spectrum-textfield-icon-spacing-inline-end-valid: var(--spectrum-field-edge-to-validation-icon-large);
  --spectrum-textfield-icon-spacing-block-invalid: var(--spectrum-field-top-to-alert-icon-large);
  --spectrum-textfield-icon-spacing-block-valid: var(--spectrum-field-top-to-validation-icon-large);
  --spectrum-textfield-icon-spacing-inline-start-invalid: var(--spectrum-field-text-to-alert-icon-large);
  --spectrum-textfield-icon-spacing-inline-start-valid:var(--spectrum-field-text-to-validation-icon-large);
  --spectrum-textfield-character-count-font-size: var(--spectrum-font-size-100);
  --spectrum-textfield-character-count-spacing-block: var(--spectrum-component-bottom-to-text-100);
  --spectrum-textfield-character-count-spacing-block-quiet: var(--spectrum-character-count-to-field-quiet-large);
  --spectrum-textfield-character-count-spacing-block-side: var(--spectrum-side-label-character-count-top-margin-large);
}

.spectrum-Textfield--sizeXL {
  --spectrum-textfield-height: var(--spectrum-component-height-300);
  --spectrum-textfield-label-spacing-block-quiet: var(--spectrum-field-label-to-component-quiet-extra-large);
  --spectrum-textfield-label-spacing-inline-side-label: var(--spectrum-spacing-200);
  --spectrum-textfield-placeholder-font-size: var(--spectrum-font-size-300);
  --spectrum-textfield-spacing-inline: var(--spectrum-component-edge-to-text-200);
  --spectrum-textfield-icon-size-invalid: var(--spectrum-workflow-icon-size-300);
  --spectrum-textfield-icon-spacing-inline-end-invalid: var(--spectrum-field-edge-to-alert-icon-extra-large);
  --spectrum-textfield-icon-spacing-inline-end-valid: var(--spectrum-field-edge-to-validation-icon-extra-large);
  --spectrum-textfield-icon-spacing-block-invalid: var(--spectrum-field-top-to-alert-icon-extra-large);
  --spectrum-textfield-icon-spacing-block-valid: var(--spectrum-field-top-to-validation-icon-extra-large);
  --spectrum-textfield-icon-spacing-inline-start-invalid: var(--spectrum-field-text-to-alert-icon-extra-large);
  --spectrum-textfield-icon-spacing-inline-start-valid:var(--spectrum-field-text-to-validation-icon-extra-large);
  --spectrum-textfield-character-count-font-size: var(--spectrum-font-size-200);
  --spectrum-textfield-character-count-spacing-block: var(--spectrum-component-bottom-to-text-200);
  --spectrum-textfield-character-count-spacing-block-quiet: var(--spectrum-character-count-to-field-quiet-extra-large);
  --spectrum-textfield-character-count-spacing-block-side: var(--spectrum-side-label-character-count-top-margin-extra-large);
}

/********* WHCM *********/
@media (forced-colors: active) {
  .spectrum-Textfield {
    --spectrum-textfield-border-color-hover: Highlight;
    --spectrum-textfield-border-color-active: Highlight;
    --spectrum-textfield-border-color-focus: Highlight;

    --spectrum-textfield-border-color-negative-default: Highlight;
    --spectrum-textfield-border-color-negative-hover: Highlight;
    --spectrum-textfield-border-color-negative-active: Highlight;
    --spectrum-textfield-border-color-negative-focus: Highlight;

    --spectrum-textfield-text-color-default: GrayText;
    --spectrum-textfield-text-color-hover: GrayText;
    --spectrum-textfield-text-color-active: GrayText;
    --spectrum-textfield-text-color-focus: GrayText;
    --spectrum-textfield-text-color-disabled: GrayText;
    --spectrum-textfield-text-color-readonly: CanvasText;

    --spectrum-textfield-focus-indicator-color: Highlight;

    &.is-focused,
    &.is-keyboardFocused,
    &:focus-within {
      .spectrum-Textfield-input-wrapper {
        /* focus indicator is focused state */
        &::after {
          forced-color-adjust: none;
        }
      }
    }
  }
}


/********* TEXT FIELD and TEXT AREA Outer Wrapper *********/
.spectrum-Textfield {
  position: relative;
  outline: none;
  margin: auto;

  /*** ↓ Browser Mitigations for Text Field ↓ ***/
  /* Edge - Use padding instead of text-indent because text-indent does not left align the text  */
  text-indent: 0;

  /* Edge - Show the overflow for input. */
  overflow: visible;

  /* Firefox and Safari - Remove the margin for input. */
  margin: 0;

  /* Firefox -
    Removes the native spin buttons in Firefox; -moz-appearance: none results in spinners.
    This has to come after -webkit-appearance or it gets overridden (#214)
    Details: http://stackoverflow.com/questions/23372903/hide-spinner-in-input-number-firefox-29

    Sets the opacity to 1 as normalize.css sets an opacity to placeholders
    Details: https://github.com/csstools/normalize.css/blob/main/normalize.css#L297
  */
  -moz-appearance: textfield;

  /* All browsers - Change the input font styles */
  text-overflow: ellipsis;
  -webkit-appearance: none;

  /* Grid layout for child components */
  display: inline-grid;
  grid-template-columns: auto auto auto;
  grid-template-rows: auto auto;

  /********* Child Component - Label *********/
  .spectrum-FieldLabel {
    grid-row: 1;
    grid-column: 1 / span 2;
    margin-block-end: var(--mod-textfield-label-spacing-block, var(--spectrum-textfield-label-spacing-block));
  }

  /********* Child Component - Help Text *********/
  .spectrum-HelpText {
    grid-row: 3;
    grid-column: 1 / span 3;
    margin-block-start: var(--mod-textfield-helptext-spacing-block, var(--spectrum-textfield-helptext-spacing-block));
  }
}

/********* Child Element - Character Count *********/
.spectrum-Textfield-character-count {
  grid-row: 1;
  grid-column: 3 / span 1;
  display: inline-flex;
  align-items: flex-end;
  justify-content: flex-end;
  width: auto;
  margin-block-end: var(--mod-textfield-character-count-spacing-block, var(--spectrum-textfield-character-count-spacing-block));
  margin-inline-start: var(--mod-textfield-character-count-spacing-inline, var(--spectrum-textfield-character-count-spacing-inline));
  margin-inline-end: 0;
  font-size: var(--mod-textfield-character-count-font-size, var(--spectrum-textfield-character-count-font-size));
  font-family: var(--mod-textfield-character-count-font-family, var(--spectrum-textfield-character-count-font-family));
  font-weight: var(--mod-textfield-character-count-font-weight, var(--spectrum-textfield-character-count-font-weight));
}

/********* Child Element - Validation Icons - ⚠️ ✅ *********/
.spectrum-Textfield-validationIcon {
  position: absolute;
  pointer-events: all;
  top: 0;
  right: 0;

  [dir="rtl"] & {
    left: 0;
    right: auto;
  }
}

/********* Child div - Input Wrapper - for alignment of focus indicator *********/
.spectrum-Textfield-input-wrapper {
  grid-row: 2;
  grid-column: 1 / span 3;
  box-sizing: border-box;
  block-size: var(--mod-textfield-height, var(--spectrum-textfield-height));
  min-inline-size: var(--mod-textfield-min-width, var(--spectrum-textfield-min-width));
  position: relative;

  /*** Focus Indicator - Unfocused Base Styles ***/
  &::after {
    block-size: calc(100% + (var(--mod-textfield-focus-indicator-gap, var(--spectrum-textfield-focus-indicator-gap)) * 2));
    inline-size: calc(100% + (var(--mod-textfield-focus-indicator-gap, var(--spectrum-textfield-focus-indicator-gap)) * 2));
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    margin-block-start: calc((var(--mod-textfield-focus-indicator-gap, var(--spectrum-textfield-focus-indicator-gap))
                              + var(--mod-textfield-focus-indicator-thickness, var(--spectrum-textfield-focus-indicator-thickness)))
                              * -1);
    margin-inline-start: calc((var(--mod-textfield-focus-indicator-gap, var(--spectrum-textfield-focus-indicator-gap))
                              + var(--mod-textfield-focus-indicator-thickness, var(--spectrum-textfield-focus-indicator-thickness)))
                              * -1);
    pointer-events: none;
    content: '';
    border-color: transparent;
    border-style: solid;
    border-width: 0;
    border-radius: calc(var(--mod-textfield-corner-radius, var(--spectrum-textfield-corner-radius))
                        + var(--mod-textfield-border-width, var(--spectrum-textfield-border-width))
                        + var(--mod-textfield-focus-indicator-gap, var(--spectrum-textfield-focus-indicator-gap)));
  }
}

/********* Child Element - Input *********/
.spectrum-Textfield-input {
  box-sizing: border-box;
  inline-size: 100%;
  block-size: 100%;
  padding-block-start: var(--mod-textfield-spacing-block-start, var(--spectrum-textfield-spacing-block-start));
  padding-block-end: var(--mod-textfield-spacing-block-end, var(--spectrum-textfield-spacing-block-end));
  padding-inline: var(--mod-textfield-spacing-inline, var(--spectrum-textfield-spacing-inline));
  /* Use padding instead of text-indent because text-indent does not left align the text in Edge browser  */
  text-indent: 0;
  vertical-align: top; /* used to align them correctly in forms. */
  outline: none;
  background-color: var(--mod-textfield-background-color, var(--spectrum-textfield-background-color));
  border: var(--mod-textfield-border-width, var(--spectrum-textfield-border-width)) solid var(--highcontrast-textfield-border-color, var(--mod-textfield-border-color, var(--spectrum-textfield-border-color)));
  border-radius: var(--mod-textfield-corner-radius, var(--spectrum-textfield-corner-radius));
  transition: border-color var(--mod-animation-duration-100, var(--spectrum-animation-duration-100)) ease-in-out;

  font-size: var(--mod-textfield-placeholder-font-size, var(--spectrum-textfield-placeholder-font-size));
  font-family: var(--mod-textfield-font-family, var(--spectrum-textfield-font-family));
  font-weight: var(--mod-textfield-font-weight, var(--spectrum-textfield-font-weight));
  color: var(--highcontrast-textfield-text-color-default, var(--mod-textfield-text-color-default, var(--spectrum-textfield-text-color-default)));

  /*** ↓ Browser Mitigations for Input ↓ ***/
  /* Remove the margin for input in Firefox and Safari. */
  margin: 0;

  /* Show the overflow for input in Edge. */
  overflow: visible;

  -webkit-appearance: none;
  /*
    Removes the native spin buttons in Firefox; -moz-appearance: none results in spinners.
    This has to come after -webkit-appearance or it gets overridden (#214)
    Details: http://stackoverflow.com/questions/23372903/hide-spinner-in-input-number-firefox-29

    Sets the opacity to 1 as normalize.css sets an opacity to placeholders
    Details: https://github.com/csstools/normalize.css/blob/main/normalize.css#L297
  */
  -moz-appearance: textfield;

  /* Remove the native clear button in IE */
  /* http://stackoverflow.com/questions/14007655/remove-ie10s-clear-field-x-button-on-certain-inputs */
  &::-ms-clear {
    inline-size: 0;
    block-size: 0;
  }

  /* removes the native spin buttons */
  /* http://stackoverflow.com/questions/23372903/hide-spinner-in-input-number-firefox-29 */
  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  /* removes the red border that appears in Firefox */
  &:-moz-ui-invalid {
    box-shadow: none;
  }

  /* added to work with Edge, note, it needs double ::
   * not single : which is what autoprefixer will add
   */
  &::-ms-input-placeholder {
    opacity: 1;
  }

  /*** Input Placeholder Text ***/
  &::placeholder {
    opacity: 1;
    color: var(--highcontrast-textfield-text-color-default, var(--mod-textfield-text-color-default, var(--spectrum-textfield-text-color-default)));
    transition: color var(--mod-animation-duration-100, var(--spectrum-animation-duration-100)) ease-in-out;
  }

  /*** Input Placeholder Text - CJK ***/
  &:lang(ja),
  &:lang(zh),
  &:lang(ko) {
    &::placeholder {
      font-style: normal;
    }

    &::-ms-input-placeholder {
      /* added to work with Edge, same as above */
      font-style: normal;
    }
  }
}

/********* Texfield States and Variants *********/
.spectrum-Textfield {
  /********* User Action States *********/
  /****** Hover ******/
  &:hover {
    .spectrum-Textfield-input {
      border-color: var(--highcontrast-textfield-border-color-hover, var(--mod-textfield-border-color-hover, var(--spectrum-textfield-border-color-hover)));

      &::placeholder {
        color: var(--highcontrast-textfield-text-color-hover, var(--mod-textfield-text-color-hover, var(--spectrum-textfield-text-color-hover)));
      }
    }
  }

  /******Active ******/
  &:active {
    .spectrum-Textfield-input {
      border-color: var(--highcontrast-textfield-border-color-active, var(--mod-textfield-border-color-active, var(--spectrum-textfield-border-color-active)));

      &::placeholder {
        color: var(--highcontrast-textfield-text-color-active, var(--mod-textfield-text-color-active, var(--spectrum-textfield-text-color-active)));
      }
    }
  }

  /*** ! TODO - get design specs, should be different from keyboard focus ***/
  /****** Mouse Focus ******/
  &:focus,
  &.is-focused {
    .spectrum-Textfield-input-wrapper {
      /* focus indicator is focused state */
      &::after {
        //border-color: var(--highcontrast-textfield-focus-indicator-color, var(--mod-textfield-focus-indicator-color, var(--spectrum-textfield-focus-indicator-color)));
        //border-width: var(--mod-textfield-focus-indicator-thickness, var(--spectrum-textfield-focus-indicator-thickness));
      }
    }

    .spectrum-Textfield-input {
      border-color: var(--highcontrast-textfield-border-color-focus, var(--mod-textfield-border-color-focus, var(--spectrum-textfield-border-color-focus)));
      color: var(--highcontrast-textfield-text-color-focus, var(--mod-textfield-text-color-focus, var(--spectrum-textfield-text-color-focus)));

      &::placeholder {
        color: var(--highcontrast-textfield-text-color-focus, var(--mod-textfield-text-color-focus, var(--spectrum-textfield-text-color-focus)));
      }
    }
  }

  /****** Keyboard Focus ******/
  &.is-keyboardFocused,
  &.is-keyboardFocused:focus-within {
    .spectrum-Textfield-input-wrapper {
      /* focus indicator is focused state */
      &::after {
        border-color: var(--highcontrast-textfield-focus-indicator-color, var(--mod-textfield-focus-indicator-color, var(--spectrum-textfield-focus-indicator-color)));
        border-width: var(--mod-textfield-focus-indicator-thickness, var(--spectrum-textfield-focus-indicator-thickness));
      }
    }

    .spectrum-Textfield-input,
    .spectrum-Textfield-input:focus-ring,
    .spectrum-Textfield-input:focus-visible {
      border-color: var(--highcontrast-textfield-border-color-focus, var(--mod-textfield-border-color-focus, var(--spectrum-textfield-border-color-focus)));
      color: var(--highcontrast-textfield-text-color-focus, var(--mod-textfield-text-color-focus, var(--spectrum-textfield-text-color-focus)));

      &::placeholder {
        color: var(--highcontrast-textfield-text-color-focus, var(--mod-textfield-text-color-focus, var(--spectrum-textfield-text-color-focus)));
      }
    }
  }


/********* Component Validation *********/
  /****** Validation - Valid ✅ ******/
  &.is-valid {
    .spectrum-Textfield-validationIcon {
      margin-block-start: var(--mod-textfield-icon-spacing-block-valid, var(--spectrum-textfield-icon-spacing-block-valid));
      margin-block-end: var(--mod-textfield-icon-spacing-block-valid, var(--spectrum-textfield-icon-spacing-block-valid));
      margin-inline-start: var(--mod-textfield-icon-spacing-inline-start-valid, var(--spectrum-textfield-icon-spacing-inline-start-valid));
      margin-inline-end: var(--mod-textfield-icon-spacing-inline-end-valid, var(--spectrum-textfield-icon-spacing-inline-end-valid));
      color: var(--mod-textfield-icon-color-valid, var(--spectrum-textfield-icon-color-valid));
    }
  }

  /****** Validation - Invalid ⚠️ ******/
  &.is-invalid {
    .spectrum-Textfield-validationIcon {
      block-size: var(--mod-textfield-icon-size-invalid, var(--spectrum-textfield-icon-size-invalid));
      inline-size: var(--mod-textfield-icon-size-invalid, var(--spectrum-textfield-icon-size-invalid));
      margin-block-start: var(--mod-textfield-icon-spacing-block-invalid, var(--spectrum-textfield-icon-spacing-block-invalid));
      margin-block-end: var(--mod-textfield-icon-spacing-block-invalid, var(--spectrum-textfield-icon-spacing-block-invalid));
      margin-inline-start: var(--mod-textfield-icon-spacing-inline-start-invalid, var(--spectrum-textfield-icon-spacing-inline-start-invalid));
      margin-inline-end: var(--mod-textfield-icon-spacing-inline-end-invalid, var(--spectrum-textfield-icon-spacing-inline-end-invalid));
      color: var(--mod-textfield-icon-color-invalid, var(--spectrum-textfield-icon-color-invalid));
    }

    .spectrum-Textfield-input {
      border-color: var(--highcontrast-textfield-border-color-negative-default, var(--mod-textfield-border-color-negative-default, var(--spectrum-textfield-border-color-negative-default)));
    }

    /*** Invalid Hover ***/
    &:hover {
      .spectrum-Textfield-input {
        border-color: var(--highcontrast-textfield-border-color-negative-hover, var(--mod-textfield-border-color-negative-hover, var(--spectrum-textfield-border-color-negative-hover)));
      }
    }

    /*** Invalid Active ***/
    &:active {
      .spectrum-Textfield-input {
        border-color: var(--highcontrast-textfield-border-color-negative-active, var(--mod-textfield-border-color-negative-active, var(--spectrum-textfield-border-color-negative-active)));
      }
    }

    /*** Invalid Mouse Focus ***/
    &.is-focused {
      .spectrum-Textfield-input {
        border-color: var(--highcontrast-textfield-border-color-negative-focus, var(--mod-textfield-border-color-negative-focus, var(--spectrum-textfield-border-color-negative-focus)));
      }
    }

    /*** Invalid Keyboard Focus ***/
    &.is-keyboardFocused,
    &:focus-within {
      .spectrum-Textfield-input,
      .spectrum-Textfield-input:focus-ring {
        border-color: var(--highcontrast-textfield-border-color-negative-focus, var(--mod-textfield-border-color-negative-focus, var(--spectrum-textfield-border-color-negative-focus)));
      }
    }
  }

/********* Component Status *********/
  /****** Status - Disabled 🚫 ******/
  &:disabled,
  &.is-disabled,
  &.is-disabled:hover {

    /* Disabled validation icons are transparent */
    .spectrum-Textfield-validationIcon {
      color: transparent;
    }

    .spectrum-Textfield-input {
      background-color: var(--mod-textfield-background-color-disabled, var(--spectrum-textfield-background-color-disabled));
      border-color: transparent;
      color: var(--highcontrast-textfield-text-color-disabled, var(--mod-textfield-text-color-disabled, var(--spectrum-textfield-text-color-disabled)));

      /* Disable the resize functionality when disabled */
      resize: none;

      /* The opacity must be set to 1 */
      opacity: 1;

      &::placeholder {
        color: var(--highcontrast-textfield-text-color-disabled, var(--mod-textfield-text-color-disabled, var(--spectrum-textfield-text-color-disabled)));
      }
    }
  }

  /****** Status - ReadOnly ******/
  &.is-readOnly,
  &.is-readOnly:hover,
  &.is-readOnly:active,
  &.is-readOnly:focus,
  &.is-readOnly.is-focused,
  &.is-readOnly.is-keyboardFocused,
  &.is-readOnly.is-keyboardFocused:focus-within {
    .spectrum-Textfield-validationIcon {
      color: transparent;
    }

    .spectrum-Textfield-input-wrapper::after {
      border: 0;
    }

    .spectrum-Textfield-input,
    .spectrum-Textfield-input:focus-ring,
    .spectrum-Textfield-input:focus-visible {
      background-color: transparent;
      border-color: transparent;
      color: var(--highcontrast-textfield-text-color-readonly, var(--mod-textfield-text-color-readonly, var(--spectrum-textfield-text-color-readonly)));

      &::placeholder {
        color: var(--highcontrast-textfield-text-color-readonly, var(--mod-textfield-text-color-readonly, var(--spectrum-textfield-text-color-readonly)));
        background-color: transparent;
      }
    }
  }

/********* Component Variants *********/
  /*** Variant - Side Label ***/
  &--sidelabel {
    .spectrum-Textfield-input-wrapper {
      grid-row: 1;
      grid-column: 2 / span 1;
    }

    .spectrum-FieldLabel {
      grid-row: 1;
      grid-column: 1 / span 1;
      margin-inline-end: var(--mod-textfield-label-spacing-inline-side-label, var(--spectrum-textfield-label-spacing-inline-side-label));
    }

    .spectrum-Textfield-character-count {
      grid-row: 1;
      grid-column: 3 / span 1;
      align-items: flex-start;
      margin-block-start: var(--mod-textfield-character-count-spacing-block-side, var(--spectrum-textfield-character-count-spacing-block-side));
      margin-inline-start: var(--mod-textfield-character-count-spacing-inline-side, var(--spectrum-textfield-character-count-spacing-inline-side));
    }

    .spectrum-HelpText {
      grid-row: 2;
      grid-column: 2 / span 1;
    }
  }


  /****** Variant - Quiet 🤫 ******/
  &--quiet {
    .spectrum-FieldLabel {
      margin-block-end: var(--mod-textfield-label-spacing-block-quiet, var(--spectrum-textfield-label-spacing-block-quiet));
    }

    .spectrum-Textfield-character-count {
      margin-block-end: var(--mod-textfield-character-count-spacing-block-quiet, var(--spectrum-textfield-character-count-spacing-block-quiet));
    }

    .spectrum-Textfield-input-wrapper {
      /** Quiet Focus Indicator **/
      &::after {
        inline-size: 100%;
        block-size: calc(var(--mod-textfield-height, var(--spectrum-textfield-height)) + var(--mod-textfield-focus-indicator-gap, var(--spectrum-textfield-focus-indicator-gap)));
        margin-inline-start: 0;
        margin-block-start: 0;
        border-radius: 0;
      }
    }

    .spectrum-Textfield-input {
      border-block-start-width: 0;
      border-inline-width: 0;
      margin-block-end: var(--mod-textfield-spacing-block-quiet, var(--spectrum-textfield-spacing-block-quiet));
      padding-inline: var(--mod-textfield-spacing-inline-quiet, var(--spectrum-textfield-spacing-inline-quiet));
      background-color: transparent;
      border-radius: 0;

      /* Treat all quiet inputs and text areas the same */
      resize: none;
      overflow-y: hidden;
    }

    /*** Quiet Status - Disabled 🚫 ***/
    &:disabled,
    &.is-disabled,
    &.is-disabled:hover {
      .spectrum-Textfield-input {
        background-color: transparent;
        border-color: var(--mod-textfield-background-color-disabled, var(--spectrum-textfield-background-color-disabled));

        &::placeholder {
          color: var(--highcontrast-textfield-text-color-disabled, var(--mod-textfield-text-color-disabled, var(--spectrum-textfield-text-color-disabled)));
        }
      }
    }

    /*** Quiet Validation ***/
    .spectrum-Textfield-validationIcon {
       padding-inline-end: 0;
    }

    /*** Quiet Valid ✅ ***/
    &.is-valid {
      .spectrum-Textfield-validationIcon {
        margin-inline-end: var(--mod-textfield-icon-spacing-inline-end-quiet-valid, var(--spectrum-textfield-icon-spacing-inline-end-quiet-valid));
      }
    }

    /*** Quiet Invalid ⚠️ ***/
    &.is-invalid {
      .spectrum-Textfield-validationIcon {
        margin-inline-end: var(--mod-textfield-icon-spacing-inline-end-quiet-invalid, var(--spectrum-textfield-icon-spacing-inline-end-quiet-invalid));
      }
    }

    /*** Quiet Action State - Keyboard Focus ***/
    &.is-keyboardFocused,
    &.is-keyboardFocused:focus-within {
      .spectrum-Textfield-input-wrapper {
        /* focus indicator is focused state */
        &::after {
          border-color: var(--highcontrast-textfield-focus-indicator-color, var(--mod-textfield-focus-indicator-color, var(--spectrum-textfield-focus-indicator-color)));
          border-width: 0 0 var(--mod-textfield-focus-indicator-thickness, var(--spectrum-textfield-focus-indicator-thickness)) 0;
        }
      }
    }
  }
}



/********* TEXT AREA / MULTILINE STARTS *********/
.spectrum-Textfield--multiline {
  --spectrum-text-area-min-inline-size: var(--spectrum-text-area-minimum-width);
  --spectrum-text-area-min-block-size: var(--spectrum-text-area-minimum-height);
  --spectrum-text-area-min-block-size-quiet: var(--spectrum-component-height-100);
}

.spectrum-Textfield--multiline--sizeS {
  --spectrum-text-area-min-block-size-quiet: var(--spectrum-component-height-75);
}

.spectrum-Textfield--multiline--sizeM {
  --spectrum-text-area-min-block-size-quiet: var(--spectrum-component-height-100);
}

.spectrum-Textfield--multiline--sizeL {
  --spectrum-text-area-min-block-size-quiet: var(--spectrum-component-height-200);
}

.spectrum-Textfield--multiline--sizeXL {
  --spectrum-text-area-min-block-size-quiet: var(--spectrum-component-height-300);
}

.spectrum-Textfield--multiline {

  block-size: auto;
  inline-size: auto;

  .spectrum-Textfield-input-wrapper {
    min-inline-size: var(--mod-text-area-min-inline-size, var(--spectrum-text-area-min-inline-size));
    min-block-size: var(--mod-spectrum-text-area-min-block-size, var(--spectrum-text-area-min-block-size));
  }

  .spectrum-Textfield-input {
    //resize: vertical;
    //overflow: auto;
  }

/********* Component Validation *********/
  &.is-valid,
  &.is-invalid {
    .spectrum-Textfield-validationIcon {
      margin-block-end: auto;
    }
  }

/********* Component Variants *********/
  /****** Variant - Quiet 🤫 ******/
  &.spectrum-Textfield--quiet {

    .spectrum-Textfield-input-wrapper {
      min-block-size: var(--mod-text-area-min-block-size-quiet, var(--spectrum-text-area-min-block-size-quiet));
    }
  }
}
