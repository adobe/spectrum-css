/*!
 * Copyright 2024 Adobe. All rights reserved.
 *
 * This file is licensed to you under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License. You may obtain a copy
 * of the License at <http://www.apache.org/licenses/LICENSE-2.0>
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
 * OF ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */

.spectrum-Breadcrumbs {
	/* Text - medium / default */
	--spectrum-breadcrumbs-block-size: var(--spectrum-component-height-100);
	--spectrum-breadcrumbs-font-size: var(--spectrum-font-size-100);
	--spectrum-breadcrumbs-font-size-current: var(--spectrum-font-size-100);

	/* Changes only in the multiline variant */
	--spectrum-breadcrumbs-font-weight-current: var(--spectrum-bold-font-weight);

	/* Space between separator chevron and items */
	--spectrum-breadcrumbs-separator-spacing-inline: var(--spectrum-breadcrumbs-text-to-separator-medium);

	/* Vertical spacing for text and separator icon */
	--spectrum-breadcrumbs-text-spacing-block-start: var(--spectrum-component-top-to-text-100);
	--spectrum-breadcrumbs-text-spacing-block-end: var(--spectrum-component-bottom-to-text-100);
	--spectrum-breadcrumbs-icon-spacing-block: var(--spectrum-breadcrumbs-top-to-separator-medium);
	--spectrum-breadcrumbs-title-spacing-block-start: var(--spectrum-component-top-to-text-100);
	--spectrum-breadcrumbs-title-spacing-block-end: var(--spectrum-component-top-to-text-100);

	/* Horizontal outer spacing of list */
	--spectrum-breadcrumbs-inline-start: var(--spectrum-breadcrumbs-start-edge-to-text-medium);

	/* Action button (truncated menu) spacing; only changed in the multiline variant */
	--spectrum-breadcrumbs-action-button-spacing-block: var(--spectrum-breadcrumbs-top-to-truncated-menu);
}

.spectrum-Breadcrumbs--sizeL {
	--spectrum-breadcrumbs-block-size: var(--spectrum-component-height-200);
	--spectrum-breadcrumbs-font-size: var(--spectrum-font-size-200);
	--spectrum-breadcrumbs-font-size-current: var(--spectrum-font-size-200);
	--spectrum-breadcrumbs-separator-spacing-inline: var(--spectrum-breadcrumbs-text-to-separator-large);
	--spectrum-breadcrumbs-text-spacing-block-start: var(--spectrum-component-top-to-text-200);
	--spectrum-breadcrumbs-text-spacing-block-end: var(--spectrum-component-bottom-to-text-200);
	--spectrum-breadcrumbs-icon-spacing-block: var(--spectrum-breadcrumbs-top-to-separator-large);
	--spectrum-breadcrumbs-title-spacing-block-start: var(--spectrum-component-top-to-text-200);
	--spectrum-breadcrumbs-title-spacing-block-end: var(--spectrum-component-top-to-text-200);
	--spectrum-breadcrumbs-inline-start: var(--spectrum-breadcrumbs-start-edge-to-text-large);
}

.spectrum-Breadcrumbs--multiline {
	--spectrum-breadcrumbs-block-size: var(--spectrum-breadcrumbs-height-multiline);
	--spectrum-breadcrumbs-font-size: var(--spectrum-font-size-75);
	--spectrum-breadcrumbs-font-size-current: var(--spectrum-heading-size-l);
	--spectrum-breadcrumbs-font-weight-current: var(--spectrum-extra-bold-font-weight);

	--spectrum-breadcrumbs-separator-spacing-inline: var(--spectrum-breadcrumbs-text-to-separator-multiline);
	--spectrum-breadcrumbs-text-spacing-block-start: var(--spectrum-breadcrumbs-top-to-text-multiline);
	--spectrum-breadcrumbs-text-spacing-block-end: var(--spectrum-breadcrumbs-top-text-to-bottom-text);
	--spectrum-breadcrumbs-icon-spacing-block: var(--spectrum-breadcrumbs-top-to-separator-multiline) var(--spectrum-breadcrumbs-separator-to-bottom-text-multiline);
	--spectrum-breadcrumbs-title-spacing-block-start: 0;
	--spectrum-breadcrumbs-title-spacing-block-end: var(--spectrum-breadcrumbs-bottom-to-text-multiline);
	--spectrum-breadcrumbs-inline-start: var(--spectrum-breadcrumbs-start-edge-to-text-multiline);
	--spectrum-breadcrumbs-action-button-spacing-block: var(--spectrum-breadcrumbs-top-to-truncated-menu) var(--spectrum-breadcrumbs-truncated-menu-to-bottom-text);
}

.spectrum-Breadcrumbs {
	list-style-type: none;
	margin: 0;
	padding-inline: 0 var(--spectrum-breadcrumbs-end-edge-to-text);
	block-size: var(--spectrum-breadcrumbs-block-size);

	display: flex;
	flex-flow: row nowrap;
	align-items: center;
	justify-content: flex-start;
}

.spectrum-Breadcrumbs-itemSeparator {
	position: relative;
	margin-block: var(--spectrum-breadcrumbs-icon-spacing-block);
	opacity: 1;
	color: var(--spectrum-neutral-content-color-default);

	&:dir(rtl) {
		transform: scaleX(-1);
	}
}

.spectrum-Breadcrumbs-item {
	box-sizing: border-box;
	position: relative;
	display: inline-flex;
	white-space: nowrap;
	align-items: center;

	font-family: var(--spectrum-sans-font-family-stack);
	font-size: var(--spectrum-breadcrumbs-font-size);
	font-weight: var(--spectrum-regular-font-weight);
	font-style: var(--spectrum-default-font-style);
	line-height: var(--spectrum-line-height-100);

	/* Breadcrumbs title (current item) */
	&:last-of-type {
		font-size: var(--spectrum-breadcrumbs-font-size-current);
		font-weight: var(--spectrum-breadcrumbs-font-weight-current);

		.spectrum-Breadcrumbs-itemSeparator {
			display: none;
		}
	}

	/* Truncated menu */
	> .spectrum-ActionButton {
		margin-inline: var(--spectrum-breadcrumbs-truncated-menu-to-separator);
		margin-block: var(--spectrum-breadcrumbs-action-button-spacing-block);
		color: var(--spectrum-neutral-subdued-content-color-default);

		@media (forced-colors: active) {
			color: LinkText;
		}

		&:disabled {
			color: var(--spectrum-disabled-content-color);

			@media (forced-colors: active) {
				color: GrayText;
			}
		}
	}

	/* Start edge to text or truncated menu */
	&:first-of-type {
		> .spectrum-Breadcrumbs-itemLink {
			margin-inline-start: var(--spectrum-breadcrumbs-inline-start);
		}

		> .spectrum-ActionButton {
			margin-inline-start: var(--spectrum-breadcrumbs-start-edge-to-truncated-menu);
		}
	}

	/* Focus indicator */
	&.is-dragged .spectrum-Breadcrumbs-itemLink,
	&:focus-visible .spectrum-Breadcrumbs-itemLink {
		&::before {
			position: absolute;
			content: "";
			pointer-events: none;

			margin-inline-start: calc((var(--spectrum-focus-indicator-gap) + var(--spectrum-focus-indicator-thickness)) * -1);
			margin-block-start: calc((var(--spectrum-focus-indicator-gap) + var(--spectrum-focus-indicator-thickness)) * -1);

			box-sizing: border-box;
			display: block;
			inline-size: calc(100% + (var(--spectrum-focus-indicator-gap) * 2) + (var(--spectrum-focus-indicator-thickness) * 2));
			block-size: calc(100% + (var(--spectrum-focus-indicator-gap) * 2) + (var(--spectrum-focus-indicator-thickness) * 2));

			border-width: var(--spectrum-focus-indicator-thickness);
			border-style: solid;
			border-radius: var(--spectrum-corner-radius-small-default);
			border-color: var(--spectrum-focus-indicator-color);
		}
	}

	&.is-dragged .spectrum-Breadcrumbs-itemLink::before {
		background: color-mix(in sRGB, var(--spectrum-drop-zone-background-color) calc(var(--spectrum-drop-zone-background-color-opacity) * 100%), transparent);

		/* Make sure the background color does not appear on top of the text. */
		z-index: -1;
	}
}

.spectrum-Breadcrumbs-itemLink {
	cursor: default;
	position: relative;
	box-sizing: border-box;
	display: block;
	border-radius: var(--spectrum-corner-radius-small-default); /* placeholder for token */
	outline: none;
	text-decoration: none;
	color: var(--spectrum-neutral-subdued-content-color-default);

	/* Create new stacking context for negative z-index dragged pseudo element. */
	isolation: isolate;

	margin-block-start: var(--spectrum-breadcrumbs-text-spacing-block-start);
	margin-block-end: var(--spectrum-breadcrumbs-text-spacing-block-end);
	margin-inline-start: var(--spectrum-breadcrumbs-separator-spacing-inline);

	@media (forced-colors: active) {
		color: LinkText;
	}

	&.is-disabled,
	&[aria-disabled="true"] {
		color: var(--spectrum-disabled-content-color);

		@media (forced-colors: active) {
			color: GrayText;
		}
	}

	/* Breadcrumbs title (current item) */
	.spectrum-Breadcrumbs-item:last-of-type & {
		color: var(--spectrum-neutral-content-color-default);
		margin-block-start: var(--spectrum-breadcrumbs-title-spacing-block-start);
		margin-block-end: var(--spectrum-breadcrumbs-title-spacing-block-end);
	}

	+ .spectrum-Breadcrumbs-itemSeparator {
		margin-inline-start: var(--spectrum-breadcrumbs-separator-spacing-inline);
	}

	/* Link is focusable */
	&[href],
	&[tabindex="0"] {
		cursor: pointer;

		&:hover,
		&:active,
		&:focus-visible {
			text-decoration: underline;
			text-decoration-thickness: var(--spectrum-text-underline-thickness);
			text-underline-offset: var(--spectrum-text-underline-gap);
		}
	}
}

/* Multiline */
.spectrum-Breadcrumbs--multiline {
	flex-wrap: wrap;
	align-content: center;

	/* The multiline title takes up the full width and appears below the other breadcrumb items. */
	.spectrum-Breadcrumbs-item:last-of-type {
		block-size: auto;
		inline-size: 100%;

		> .spectrum-Breadcrumbs-itemLink {
			margin-inline-start: var(--spectrum-breadcrumbs-inline-start);
		}
	}
}
