/*!
 * Copyright 2025 Adobe. All rights reserved.
 *
 * This file is licensed to you under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License. You may obtain a copy
 * of the License at <http://www.apache.org/licenses/LICENSE-2.0>
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
 * OF ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */

.spectrum-Swatch {
	/* Placeholder tokens */
	--spectrum-swatch-icon-border-color: var(--mod-swatch-icon-border-color, rgb(0 0 0 / var(--spectrum-swatch-disabled-icon-border-opacity)));

	/* Size */
	--spectrum-swatch-size: var(--mod-swatch-size, var(--spectrum-swatch-size-medium));
	--spectrum-swatch-border-radius: var(--mod-swatch-border-radius, var(--spectrum-corner-radius-100));
	--spectrum-swatch-border-thickness: var(--mod-swatch-border-thickness, var(--spectrum-border-width-100));
	--spectrum-swatch-border-thickness-selected: var(--mod-swatch-border-thickness-selected, var(--spectrum-border-width-200));
	--spectrum-swatch-disabled-icon-size: var(--mod-swatch-disabled-icon-size, var(--spectrum-workflow-icon-size-75));
	--spectrum-swatch-slash-thickness: var(--mod-swatch-slash-thickness, var(--spectrum-swatch-slash-thickness-medium));

	/* Color */
	--spectrum-swatch-border-color-selected: var(--spectrum-gray-1000);
	--spectrum-swatch-inner-border-color-selected: var(--spectrum-gray-25);
	--spectrum-swatch-disabled-icon-color: var(--spectrum-white);
	--spectrum-swatch-icon-color: var(--spectrum-neutral-content-color-default);
	--spectrum-swatch-slash-icon-color: var(--spectrum-negative-visual-color);
	--spectrum-mixed-button-background: var(--spectrum-gray-25);
	--spectrum-add-button-background: var(--spectrum-gray-100);
	--spectrum-add-button-background-hover: var(--spectrum-gray-200);
	--spectrum-add-button-background-down: var(--spectrum-gray-200);
	--spectrum-add-button-background-keyboard-focus: var(--spectrum-gray-200);

	/* TODO update to use tokens once available */
	--spectrum-swatch-border: rgb(from var(--mod-swatch-border-color, var(--spectrum-swatch-border-color)) r g b / var(--mod-swatch-border-opacity, var(--spectrum-swatch-border-opacity)));

	/* Focus ring */
	--spectrum-swatch-focus-indicator-color: var(--spectrum-focus-indicator-color);
	--spectrum-swatch-focus-indicator-thickness: var(--mod-swatch-focus-indicator-thickness, var(--spectrum-focus-indicator-thickness));
	--spectrum-swatch-focus-indicator-gap: var(--mod-swatch-focus-indicator-gap, var(--spectrum-focus-indicator-gap));
}

/* The add-swatch's border color is the same as its background color for all states. */
.spectrum-Swatch.is-addSwatch {
	--spectrum-swatch-border: var(--spectrum-add-button-background);

	&:hover {
		--spectrum-swatch-border: var(--spectrum-add-button-background-hover);
	}

	&:active {
		--spectrum-swatch-border: var(--spectrum-add-button-background-down);
	}
}

.spectrum-Swatch--sizeXS {
	--spectrum-swatch-size: var(--mod-swatch-size, var(--spectrum-swatch-size-extra-small));
	--spectrum-swatch-disabled-icon-size: var(--mod-swatch-disabled-icon-size, var(--spectrum-workflow-icon-size-50));
	--spectrum-swatch-slash-thickness: var(--mod-swatch-slash-thickness, var(--spectrum-swatch-slash-thickness-extra-small));
}

.spectrum-Swatch--sizeS {
	--spectrum-swatch-size: var(--mod-swatch-size, var(--spectrum-swatch-size-small));
	--spectrum-swatch-disabled-icon-size: var(--mod-swatch-disabled-icon-size, var(--spectrum-workflow-icon-size-75));
	--spectrum-swatch-slash-thickness: var(--mod-swatch-slash-thickness, var(--spectrum-swatch-slash-thickness-small));
}

.spectrum-Swatch--sizeL {
	--spectrum-swatch-size: var(--mod-swatch-size, var(--spectrum-swatch-size-large));
	--spectrum-swatch-disabled-icon-size: var(--mod-swatch-disabled-icon-size, var(--spectrum-workflow-icon-size-200));
	--spectrum-swatch-slash-thickness: var(--mod-swatch-slash-thickness, var(--spectrum-swatch-slash-thickness-large));
}

.spectrum-Swatch {
	inline-size: var(--spectrum-swatch-size);
	block-size: var(--spectrum-swatch-size);

	display: flex;
	align-items: center;
	justify-content: center;

	/* contain selection indicator and focus-ring */
	position: relative;

	outline-width: 0;
	outline-style: solid;
	outline-color: transparent;

	/* don't let double clicking select stuff */
	user-select: none;

	.spectrum-Swatch-disabledIcon {
		inline-size: var(--spectrum-swatch-disabled-icon-size);
		block-size: var(--spectrum-swatch-disabled-icon-size);
	}

	&,
	&::before {
		border-radius: var(--spectrum-swatch-border-radius);
	}

	&.is-mixedValue {
		--spectrum-picked-color: var(--mod-mixed-button-background, var(--spectrum-mixed-button-background));
	}

	&.is-addSwatch {
		--spectrum-picked-color: var(--mod-add-button-background, var(--spectrum-add-button-background));

		.spectrum-Swatch-fill {
			background: var(--spectrum-picked-color);
		}

		&:hover {
			--spectrum-picked-color: var(--mod-add-button-background-hover, var(--spectrum-add-button-background-hover));
		}

		&:active {
			--spectrum-picked-color: var(--mod-add-button-background-down, var(--spectrum-add-button-background-down));
		}

		&:hover,
		&:active {
			cursor: pointer;
		}

		&.is-keyboardFocused,
		&:focus-visible {
			--spectrum-picked-color: var(--mod-add-button-background-keyboard-focus, var(--spectrum-add-button-background-keyboard-focus));
		}

		.spectrum-Swatch-icon {
			color: var(--spectrum-swatch-icon-color);
			display: block;
		}
	}

	&.is-keyboardFocused,
	&:focus-visible {
		outline-width: var(--mod-swatch-focus-indicator-thickness, var(--spectrum-swatch-focus-indicator-thickness));
		outline-color: var(--mod-swatch-focus-indicator-color, var(--spectrum-swatch-focus-indicator-color));
		outline-offset: var(--mod-swatch-focus-indicator-gap, var(--spectrum-swatch-focus-indicator-gap));

		transition: outline-color var(--mod-animation-duration-100, var(--spectrum-animation-duration-100)) ease-in-out;
	}

	&.is-selected {
		background: var(--spectrum-swatch-inner-border-color-selected);

		.spectrum-Swatch-fill {
			clip-path: polygon(
				calc(var(--spectrum-swatch-border-thickness-selected) * 2) calc(var(--spectrum-swatch-border-thickness-selected) * 2),
				calc(100% - var(--spectrum-swatch-border-thickness-selected) * 2) calc(var(--spectrum-swatch-border-thickness-selected) * 2),
				calc(100% - var(--spectrum-swatch-border-thickness-selected) * 2) calc(100% - var(--spectrum-swatch-border-thickness-selected) * 2),
				calc(var(--spectrum-swatch-border-thickness-selected) * 2) calc(100% - var(--spectrum-swatch-border-thickness-selected) * 2)
			);

			/* no border radius when selected */
			border-radius: 0;

			&::before {
				border-radius: 0;
				box-shadow: none;
			}
		}

		&::before {
			opacity: 1;
		}
	}

	/* Swatch fill: Image or SVG */
	&.is-image {
		.spectrum-Swatch-fill::before {
			background: transparent;
		}
	}

	&.is-mixedValue {
		.spectrum-Swatch-fill {
			background: var(--spectrum-picked-color, transparent);
		}

		.spectrum-Swatch-icon {
			color: var(--spectrum-swatch-icon-color);
			display: block;
		}
	}

	/* Swatch fill: Not fill with Slash */
	&.is-nothing:not(&.is-mixedValue, &.is-addSwatch) {
		.spectrum-Swatch-fill {
			background: var(--spectrum-picked-color, transparent);
			background-image: none;

			&::after {
				inline-size: var(--spectrum-swatch-slash-thickness);
				content: "";
				position: absolute;
				transform: rotate(45deg);
				block-size: 200%; /* just needs to be bigger than a swatch */
				background: var(--spectrum-swatch-slash-icon-color);
			}
		}

		&.spectrum-Swatch--rectangle .spectrum-Swatch-fill::after {
			transform: rotate(65deg);
			block-size: 215%;
		}
	}

	&[disabled],
	&.is-disabled {
		.spectrum-Swatch-disabledIcon {
			display: block;
		}
	}

	/* selection indicator */
	&::before {
		content: "";
		position: absolute;
		inset: 0;

		border-width: var(--spectrum-swatch-border-thickness-selected);
		border-style: solid;
		border-color: var(--spectrum-swatch-border-color-selected);

		opacity: 0;

		pointer-events: none;
	}
}

.spectrum-Swatch-fill {
	display: flex;
	align-items: center;
	justify-content: center;

	inline-size: 100%;
	block-size: 100%;
	box-sizing: border-box;

	position: relative;

	overflow: hidden;

	border-radius: var(--mod-swatch-border-radius, var(--spectrum-swatch-border-radius));

	/* Swatch fill: Default */
	&::before {
		content: "";
		position: absolute;
		inset: 0;
		z-index: 0;

		/* Undefined variable allows custom stylesheet or JS to pass the value to this element */
		background: var(--spectrum-picked-color, transparent);

		/* Swatch border */
		box-shadow: inset 0 0 0 var(--mod-swatch-border-thickness, var(--spectrum-swatch-border-thickness)) var(--spectrum-swatch-border);
		border-radius: var(--mod-swatch-border-radius, var(--spectrum-swatch-border-radius));
	}
}

.spectrum-Swatch-icon {
	display: none;
	pointer-events: none;

	/* Undefined variable allows custom stylesheet or JS to pass the value to this element */
	color: var(--spectrum-picked-color, transparent);
}

.spectrum-Swatch-disabledIcon {
	position: relative;
	z-index: 2;

	display: none;
	pointer-events: none;

	color: var(--spectrum-swatch-disabled-icon-color);
	stroke: var(--spectrum-swatch-disabled-icon-color);

	/* Icon fill color */
	path:first-child {
		fill: var(--spectrum-swatch-disabled-icon-color);
	}

	/* Icon outline color - does not need a highcontrast token because the icon fill color provides contrast. */
	path:last-child {
		fill: var(--spectrum-swatch-icon-border-color);
	}
}

.spectrum-Swatch--rectangle {
	inline-size: calc(var(--spectrum-swatch-size) * var(--spectrum-swatch-rectangle-width-multiplier));
}

/* Variant: Rounding - None */
.spectrum-Swatch--roundingNone {
	&,
	&::before,
	&::after,
	.spectrum-Swatch-fill,
	.spectrum-Swatch-fill::before,
	&.is-selected .spectrum-Swatch-fill,
	&.is-selected .spectrum-Swatch-fill::before {
		border-radius: var(--spectrum-corner-radius-none);
	}
}

/* Variant: Rounding - Full */
.spectrum-Swatch--roundingFull {
	&:not(.spectrum-Swatch--rectangle) {
		&,
		&::before,
		&::after,
		.spectrum-Swatch-fill,
		.spectrum-Swatch-fill::before,
		&.is-selected .spectrum-Swatch-fill,
		&.is-selected .spectrum-Swatch-fill::before {
			border-radius: var(--mod-corner-radius-full, var(--spectrum-corner-radius-full));
		}

		&.is-selected .spectrum-Swatch-fill {
			clip-path: circle(calc(50% - (var(--spectrum-swatch-border-thickness-selected) * 2)) at 50% 50%);
		}
	}
}

.spectrum-Swatch-image {
	object-fit: contain;

	inline-size: 100%;
	block-size: 100%;

	transition:
		width var(--mod-animation-duration-100, var(--spectrum-animation-duration-100)) ease-in-out,
		height var(--mod-animation-duration-100, var(--spectrum-animation-duration-100)) ease-in-out;
}
